<!DOCTYPE html>
<html>
<head>
  <style>
    #container {
      position: absolute;  /* Change to absolute */
      width: 100%;         /* Change to 100% */
      height: 100%;        /* Change to 100% */
    }

    .mouseImage {
      position: absolute;
      display: none;
    }
  </style>
</head>
<body>
  <div id="container">
  </div>

  <!-- Add a button for the screenshot -->
  <button id="screenshot">Take Screenshot</button>

  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script>
    var container = document.getElementById('container');
    var preImage = document.createElement('img'); // 마우스를 따라다니는 이미지의 미리보기
    var moveCounter = 0; // Add this line
    preImage.style.position = 'absolute';
    preImage.style.zIndex = 1;
    container.appendChild(preImage);

    preImage.addEventListener('load', function() {
      this.width = this.naturalWidth * 0.25; // Set the width to 25% of the original size
      this.height = this.naturalHeight * 0.25; // Set the height to 25% of the original size
    });

    container.addEventListener('mousemove', function(event) {
      var x = event.clientX - container.offsetLeft; // 마우스의 x 위치 계산
      var y = event.clientY - container.offsetTop; // 마우스의 y 위치 계산
      moveCounter++; // Increase counter

      // Only change the image every 50 moves
      if (moveCounter % 50 == 0) { // Add this line
        var randomNumber = Math.floor(Math.random() * 16) + 1; // 랜덤한 이미지를 선택하기 위한 변수
        preImage.src = 'piece/' + randomNumber + '.png';
      }

      preImage.style.left = x + 'px';
      preImage.style.top = y + 'px';
    });

    container.addEventListener('click', function(event) {
      var newImage = document.createElement('img');
      newImage.src = preImage.src;
      newImage.style.position = 'absolute';
      newImage.style.left = event.clientX - container.offsetLeft + 'px';
      newImage.style.top = event.clientY - container.offsetTop + 'px';
      container.appendChild(newImage);

      newImage.addEventListener('load', function() {
        this.width = this.naturalWidth * 0.25; // Set the width to 25% of the original size
        this.height = this.naturalHeight * 0.25; // Set the height to 25% of the original size
      });
    });

    // Add event listener for screenshot button
    document.getElementById('screenshot').addEventListener('click', function() {
      html2canvas(document.body).then(function(canvas) {
        var link = document.createElement('a');
        link.download = 'screenshot.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    });
  </script>
</body>
</html>

